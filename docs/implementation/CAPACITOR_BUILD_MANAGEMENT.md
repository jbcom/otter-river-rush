# Capacitor Build File Management

## Overview

This document explains why certain Capacitor-generated files are excluded from version control and how the project handles Android/iOS build configuration.

## Auto-Generated Files (Not Tracked)

The following files are auto-generated by Capacitor CLI and **should not** be tracked in git:

- `android/app/capacitor.build.gradle`
- `android/capacitor.settings.gradle`
- `android/capacitor-cordova-android-plugins/`
- `ios/App/Podfile`

### Why Not Track These?

1. **Automatically Regenerated**: These files are regenerated every time you run:
   - `npx cap sync`
   - `npx cap update`
   - `npx cap add android`/`ios`

2. **Manual Edits Are Lost**: Any manual modifications to these files will be overwritten during the next sync/update cycle

3. **Version Control Noise**: Tracking auto-generated files creates unnecessary merge conflicts and diff noise

## Build Configuration Strategy

### Android Java Version Control

The project enforces Java 17 compatibility globally through `android/build.gradle`:

```gradle
allprojects {
    // Force all modules to use Java 17 to match CI environment
    plugins.withType(com.android.build.gradle.BasePlugin) {
        android {
            compileOptions {
                sourceCompatibility = JavaVersion.VERSION_17
                targetCompatibility = JavaVersion.VERSION_17
            }
        }
    }
}
```

This approach:
- ✅ Applies to all Android modules automatically
- ✅ Persists across Capacitor updates
- ✅ Uses modern Gradle syntax (`=` operator)
- ✅ Avoids deprecated `afterEvaluate` blocks
- ✅ Follows Gradle best practices with `plugins.withType`

### What Should Be Tracked?

These manually-maintained build files **should** be tracked in git:

- `android/build.gradle` - Root project configuration
- `android/app/build.gradle` - App-specific configuration
- `android/variables.gradle` - Version variables
- `android/gradle.properties` - Gradle properties
- `capacitor.config.ts` - Capacitor configuration

## Related Issues

- **Issue #59**: Highlighted the problem with manually editing auto-generated files
- **PR #60**: Initially attempted to manually edit `capacitor.build.gradle` (superseded)
- **Commit d5f4896**: Removed auto-generated files from version control

## Best Practices

1. **Never manually edit** files marked with `DO NOT EDIT` comments
2. **Configure build settings** in the root `build.gradle` or app-specific `build.gradle`
3. **Use Capacitor hooks** if you need to customize the build process programmatically
4. **Document any custom build logic** in this file or related docs

## References

- [Capacitor Android Documentation](https://capacitorjs.com/docs/android)
- [Gradle Plugin DSL](https://docs.gradle.org/current/userguide/plugins.html#sec:plugins_block)
- [Modern Gradle Syntax](https://docs.gradle.org/current/userguide/migrating_from_groovy_to_kotlin_dsl.html)
